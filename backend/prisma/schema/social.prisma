model Room {
    id String @id @default(uuid()) @db.Uuid

    // basic detail 
    name     String
    linkRoom String?
    createAt DateTime @default(now())
    updateAt DateTime @updatedAt

    authorId String? @db.Uuid
    author   User?   @relation(fields: [authorId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    // realtion
    members GroupMember[]
}

model GroupMember {
    id String @id @default(uuid()) @db.Uuid

    userId String   @db.Uuid
    joinAt DateTime @default(now())
    user   User     @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    groupId String @db.Uuid
    group   Room   @relation(fields: [groupId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    @@unique([groupId, userId])
}

model Role {
    id String @id @default(uuid()) @db.Uuid

    nameRole String

    // realtion
    userRoleId String?   @db.Uuid
    userRole   UserRole? @relation(fields: [userRoleId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    rolePermisson RolePermisson[]
}

model UserRole {
    id String @id @default(uuid()) @db.Uuid

    // realtion
    userId String? @db.Uuid
    user   User?       @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
    roles  Role[]
}

model Permission {
    id String @id @default(uuid()) @db.Uuid

    namePermission String
    codePermisson  Int

    // realtion
    rolePermissonId String?        @db.Uuid
    rolePermission  RolePermisson? @relation(fields: [rolePermissonId], references: [id], onDelete: Cascade, onUpdate: Cascade)
}

model RolePermisson {
    id String @id @default(uuid()) @db.Uuid

    roleId     String       @db.Uuid
    role       Role         @relation(fields: [roleId], references: [id], onDelete: Cascade, onUpdate: Cascade)
    // realtion
    permission Permission[]
}
